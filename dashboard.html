<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamified Learning Dashboard</title>
    <link rel="stylesheet" href="dashboard-style.css">
</head>

<body>
    <header>
        <h1>Gamified Learning Dashboard</h1>
        <button class="logout-btn" onclick="logout()">Logout</button>
    </header>

    <div class="actions">
        <button onclick="alert('Leaderboard - Coming Soon!')">Leaderboard</button>
        <button onclick="alert('Achievements - Coming Soon!')">Achievements</button>
        <button onclick="alert('Analytics - Coming Soon!')">Analytics Graph</button>
    </div>

    <div id="selection-area"></div>

    <script>
        const curriculum = {
            "6": {
                "Science": [{ chapter: "Components of Food" }, { chapter: "Plant Reproduction" }, { chapter: "Motion and Measurement" }],
                "Math": [{ chapter: "Number Systems" }, { chapter: "Basic Geometry" }, { chapter: "Data Handling" }],
                "Technology": [{ chapter: "Simple Machines" }, { chapter: "Introduction to Robotics" }, { chapter: "Computer Basics" }],
                "Engineering": [{ chapter: "Basic Circuit Concepts" }, { chapter: "Structures and Design" }, { chapter: "Engineering Tools" }]
            },
            "7": {
                "Science": [{ chapter: "Nutrition in Plants" }, { chapter: "Weather, Climate and Adaptations" }, { chapter: "Electric Current" }],
                "Math": [{ chapter: "Integers" }, { chapter: "Fractions and Decimals" }, { chapter: "Lines and Angles" }],
                "Technology": [{ chapter: "Simple Circuits" }, { chapter: "Advanced Robotics" }, { chapter: "Computer Hardware" }],
                "Engineering": [{ chapter: "Bridge Building Concepts" }, { chapter: "Lever Mechanics" }, { chapter: "Hydraulics" }]
            },
            "8": {
                "Science": [{ chapter: "Cell Structure" }, { chapter: "Force and Pressure" }, { chapter: "Sound" }],
                "Math": [{ chapter: "Algebra Basics" }, { chapter: "Perimeter and Area" }, { chapter: "Volume and Surface Area" }],
                "Technology": [{ chapter: "Automata" }, { chapter: "Advanced Circuits" }, { chapter: "Network Basics" }],
                "Engineering": [{ chapter: "Mechanical Systems" }, { chapter: "Material Strength" }, { chapter: "Building Systems" }]
            }
        };

        function logout() {
            localStorage.removeItem('loggedInUser');
            window.location.href = 'index.html';
        }

        function createButton(text, onClickAction) {
            const btn = document.createElement('button');
            btn.textContent = text;
            btn.onclick = onClickAction;
            return btn;
        }

        function clearSelectionArea() {
            document.getElementById('selection-area').innerHTML = '';
        }

        function showClassOptions() {
            clearSelectionArea();
            const area = document.getElementById('selection-area');
            area.innerHTML = `<h2>Select Your Class</h2><div id="class-options"></div>`;
            ["6", "7", "8"].forEach(cls => {
                document.getElementById('class-options').appendChild(createButton(`Class ${cls}`, () => selectClass(cls)));
            });
        }

        function selectClass(selectedClass) {
            clearSelectionArea();
            const area = document.getElementById('selection-area');
            area.innerHTML = `<h2>Selected Class: ${selectedClass}</h2><h3>Select Subject</h3>`;

            const backBtn = createButton("← Back", showClassOptions);
            backBtn.style.backgroundColor = "#F5A623";
            area.appendChild(backBtn);

            const subjects = Object.keys(curriculum[selectedClass]);
            subjects.forEach(subject => {
                area.appendChild(createButton(subject, () => selectSubject(selectedClass, subject)));
            });
        }

        function selectSubject(selectedClass, selectedSubject) {
            clearSelectionArea();
            const area = document.getElementById('selection-area');
            area.innerHTML = `<h2>${selectedSubject}</h2><h3>Select Chapter</h3>`;

            const backBtn = createButton("← Back", () => selectClass(selectedClass));
            backBtn.style.backgroundColor = "#F5A623";
            area.appendChild(backBtn);

            const chapters = curriculum[selectedClass][selectedSubject];
            chapters.forEach(({ chapter }) => {
                area.appendChild(createButton(chapter, () => selectChapter(selectedClass, selectedSubject, chapter)));
            });
        }

        function selectChapter(selectedClass, selectedSubject, selectedChapter) {
            clearSelectionArea();
            const area = document.getElementById('selection-area');
            area.innerHTML = `<h2>${selectedSubject} - ${selectedChapter}</h2><h3>Select Level</h3>`;

            const backBtn = createButton("← Back", () => selectSubject(selectedClass, selectedSubject));
            backBtn.style.backgroundColor = "#F5A623";
            area.appendChild(backBtn);

            const levels = ["Basic", "Intermediate", "Advanced"];
            levels.forEach(level => {
                area.appendChild(createButton(level, () => {
                    window.location.href = `games/flappy-science.html?class=${selectedClass}&subject=${encodeURIComponent(selectedSubject)}&chapter=${encodeURIComponent(selectedChapter)}&level=${level}`;
                }));
            });
        }

        // Initialize dashboard
        const userData = localStorage.getItem('loggedInUser');
        if (userData) {
            showClassOptions();
        } else {
            alert('No user logged in! Redirecting to login page...');
            window.location.href = 'index.html';
        }
    </script>
    <img id="logo" src="logo.png">
</body>

</html>
