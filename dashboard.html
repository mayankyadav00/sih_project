<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Gamified Learning</title>
    <link rel="stylesheet" href="./dashboard-style.css">
</head>

<body>
    <header>
        <h1>Gamified Learning Dashboard</h1>
        <button class="logout-btn" onclick="logout()">Logout</button>
    </header>

    <div class="actions">
        <button onclick="startSelection()">Start Learning</button>
        <button>Leaderboard</button>
        <button>Achievements</button>
        <button>Analytics Graph</button>
    </div>

    <div id="selection-area">
        <!-- Selections will appear here -->
    </div>

    <script>
        const user = JSON.parse(localStorage.getItem("loggedInUser"));

        if (!user) {
            alert("Please login first.");
            window.location.href = "./index.html";
        }

        function logout() {
            localStorage.removeItem("loggedInUser");
            window.location.href = "./index.html";
        }

        function startSelection() {
            document.getElementById('selection-area').innerHTML = `
                <h2>Select Class</h2>
                <div class="button-group">
                    <button onclick="selectSubject(6)">Class 6</button>
                    <button onclick="selectSubject(7)">Class 7</button>
                    <button onclick="selectSubject(8)">Class 8</button>
                </div>
            `;
        }

        function selectSubject(cls) {
            document.getElementById('selection-area').innerHTML = `
                <h2>Select Subject</h2>
                <div class="button-group">
                    <button onclick="selectChapter(${cls}, 'Science')">Science</button>
                    <button onclick="selectChapter(${cls}, 'Math')">Math</button>
                    <button onclick="selectChapter(${cls}, 'Technology')">Technology</button>
                    <button onclick="selectChapter(${cls}, 'Engineering')">Engineering</button>
                </div>
                <button class="back-btn" onclick="startSelection()">← Back</button>
            `;
        }

        function selectChapter(cls, subject) {
            document.getElementById('selection-area').innerHTML = `
                <h2>Select Chapter</h2>
                <div class="button-group">
                    <button onclick="selectLevel(${cls}, '${subject}', 'Chapter 1')">Chapter 1</button>
                    <button onclick="selectLevel(${cls}, '${subject}', 'Chapter 2')">Chapter 2</button>
                    <button onclick="selectLevel(${cls}, '${subject}', 'Chapter 3')">Chapter 3</button>
                </div>
                <button class="back-btn" onclick="selectSubject(${cls})">← Back</button>
            `;
        }

        function selectLevel(cls, subject, chapter) {
            document.getElementById('selection-area').innerHTML = `
                <h2>Select Level</h2>
                <div class="button-group">
                    <button onclick="startGame(${cls}, '${subject}', '${chapter}', 'Basic')">Basic</button>
                    <button onclick="startGame(${cls}, '${subject}', '${chapter}', 'Intermediate')">Intermediate</button>
                    <button onclick="startGame(${cls}, '${subject}', '${chapter}', 'Advanced')">Advanced</button>
                </div>
                <button class="back-btn" onclick="selectChapter(${cls}, '${subject}')">← Back</button>
            `;
        }

        function startGame(cls, subject, chapter, level) {
            alert(`Game will start for:\nClass: ${cls}\nSubject: ${subject}\nChapter: ${chapter}\nLevel: ${level}`);
            window.location.href = `symmetry-game.html`;

            // Later: window.location.href = `games/game.html?class=${cls}&subject=${subject}&chapter=${chapter}&level=${level}`;
        }

        // ➤ Automatically trigger class selection on page load
        window.onload = startSelection;
    </script>
</body>

</html>
